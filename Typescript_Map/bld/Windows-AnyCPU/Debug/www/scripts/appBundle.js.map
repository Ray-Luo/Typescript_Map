{"version":3,"file":"appBundle.js","sourceRoot":"","sources":["../../scripts/map.ts","../../scripts/index.ts"],"names":[],"mappings":"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","sourcesContent":["ï»¿/// <reference path=\"jquery.d.ts\"/>\n/// <reference path=\"pouch.d.ts\"/>\n\nmodule Map\n{\n    \"use strict\";\n\n\n\n    export class Map\n    {\n\n        public static mymap: L.Map;\n        public static _this;\n        private form: JQuery = $(\"#form\");\n        private submitButton: JQuery = $(\"#submit\");\n        public static db;\n        public static point_flag = 0;\n        public static line_flag = 1;\n        public static cursor_x;\n        public static cursor_y;\n        public static length;\n        public static pt_list = [];\n       \n\n\n\n        constructor(form: HTMLFormElement) {\n            Map._this = this;\n\n            var button = document.querySelector('#submit');\n            \n            this.initialize_map();\n\n            this.setup_puuchDB();\n\n            button.addEventListener('click', function (e) {\n                Map._this.addFeature(Number($(\"#point1_x\").val()), Number($(\"#point1_y\").val()), Number($(\"#point2_x\").val()), Number($(\"#point2_y\").val()));                \n                e.preventDefault();\n            });\n        }\n                \n        addFeature = (x1: number, y1: number, x2: number, y2: number): void => {\n            if (x2 != 0 && y2 != 0) {\n                Map._this.addline(x1, y1, x2, y2);\n            } else\n            Map._this.addPoint(x1, y1);\n        }\n\n        addPoint = (x: number, y: number): void => {\n            L.marker([x, y]).addTo(Map.mymap);\n        }\n\n        addline = (x1: number, y1: number, x2: number, y2: number): void => {\n            var pointA = new L.LatLng(x1, y1);\n            var pointB = new L.LatLng(x2, y2);\n            var pointList = [pointA, pointB];\n\n            var firstpolyline = new L.Polyline(pointList).addTo(Map.mymap);\n            Map.mymap.setView([(x1 + x2) / 2, (y1 + y2) / 2]);\n        }\n\n        initialize_map():void\n        {\n            $(\"h1\").css(\"font-size\", \"36px\");\n\n            Map.mymap = new L.Map('mapid').setView([36,-96], 13);\n                                              \n            L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpandmbXliNDBjZWd2M2x6bDk3c2ZtOTkifQ._QA7i5Mpkd_m30IGElHziw', {\n                maxZoom: 18,\n                attribution: 'Map data &copy; <a href=\"http://openstreetmap.org\">OpenStreetMap</a> contributors, ' +\n                '<a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>, ' +\n                'Imagery Â© <a href=\"http://mapbox.com\">Mapbox</a>',\n                id: 'mapbox.streets'\n            }).addTo(Map.mymap);\n     \n            L.circle([39.19, -96.5], 500, {\n                color: 'red',\n                fillColor: '#f03',\n                fillOpacity: 0.5\n            }).addTo(Map.mymap).bindPopup(\"I am a circle.\");\n\n            L.polygon([\n                [39.18, -96.5],\n                [39.19, -96.6],\n                [39.17, -96.55]\n            ]).addTo(Map.mymap).bindPopup(\"I am a polygon.\");\n\n            var popup = L.popup();\n\n            function onMapClick(e) {\n                popup\n                    .setLatLng(e.latlng)\n                    .setContent(\"You clicked the map at \" + e.latlng.toString())\n                    .openOn(Map.mymap);\n\n                Map.cursor_x = e.latlng.lat.toString();\n                Map.cursor_y = e.latlng.lng.toString();\n\n                Map.db.allDocs({ include_docs: true, descending: true }, function (err, result) {\r\n                    var features = result.rows;\n                });\n\n                Map.db.get('line').then(function (line) {\n                    line.path_pt.x.push(Map.cursor_x);\n                    line.path_pt.y.push(Map.cursor_y);\n                    Map.length = line.path_pt.x.length();\n                    return Map.db.put(line);\n                }).then(function () {                    \r\n                    return Map.db.get('line');\r\n                }).then(function (doc) {\r\n                    console.log(doc);\r\n                    });\n\n                Map.db.get('line').then(function (line) {\n                    var pt_list_x = [];\n                    var pt_list_y = [];\n                    //var pt_list = [];\n                    pt_list_x.push(line.base_pt.x[0]);\n                    pt_list_y.push(line.base_pt.y[0]);\n\n                    for (var i = 0; i < line.path_pt.x.length; i++) {\n                        pt_list_x.push(line.path_pt.x[i]);\n                        pt_list_y.push(line.path_pt.y[i]);\n                    }\n\n\n                    pt_list_x.push(line.base_pt.x[1]);\n                    pt_list_y.push(line.base_pt.y[1]);\n\n                    for (var i = 0; i < pt_list_x.length; i++) {\n                        Map.pt_list.push(new L.LatLng(pt_list_x[i], pt_list_y[i]));\n                    }\n\n                    var polyline = new L.Polyline(Map.pt_list).addTo(Map.mymap);\n                    \n                }).then(function () {\r\n                    return Map.db.get('line');\r\n                }).then(function (doc) {\r\n                    console.log(doc);\r\n                });\n\n                /*\n                            var pointA = new L.LatLng(x1, y1);\n            var pointB = new L.LatLng(x2, y2);\n            var pointList = [pointA, pointB];\n\n            var firstpolyline = new L.Polyline(pointList).addTo(Map.mymap);\n            Map.mymap.setView([(x1 + x2) / 2, (y1 + y2) / 2]);\n                */\n            }\n\n            Map.mymap.on('click', onMapClick);\n        }\n\n        setup_puuchDB(): void\n        {                      \n            Map.db = new PouchDB(\"LeveeInspection_1\");\n\n            /*\n            Map.db.destroy().then(function (response) {\r\n                // success\r\n            }).catch(function (err) {\r\n                console.log(err);\r\n            });   \n\n            Map.db.allDocs({ include_docs: true, descending: true }, function (err, result) {\r\n                var features = result.rows;\n\n                for (var i = 0; i < features.length; i++) {\n                    //  if it is a point\n                    Map.db.get(features[i].doc._id).then(function (doc) {\r\n                        return Map.db.remove(doc);\r\n                    });\n                    \n                }\n            });*/\n\n\n\n\n            var line = {\n                _id: \"line\",\n                flag: Map.line_flag,\n                base_pt: { x: [36, 36.1], y: [-96, -96.1] },\n                path_pt: { x: [], y: [] }\n            }\n\n            Map.db.bulkDocs([line]);\n\n            Map.db.allDocs({ include_docs: true, descending: true }, function (err, result) {\r\n                var features = result.rows;\n\n                for (var i = 0; i < features.length;i++)\n                {\n                    //  if it is a point\n                    if (Number(features[i].doc.flag) == 0) {\n                        Map._this.addPoint(Number(features[i].doc.base_pt.x[0]), Number(features[i].doc.base_pt.y[0]));\n                    } else  // if a line\n                    {\n                        Map._this.addline(Number(features[i].doc.base_pt.x[0]), Number(features[i].doc.base_pt.y[0]), Number(features[i].doc.base_pt.x[1]), Number(features[i].doc.base_pt.y[1]));\n                    }\n                }\n            });\n\n\n            \n            /*\n            db.changes({\n                since: 'now',\n                live: true\n            }).on('change', showTodos);   */\n        }\n\n\n    }\n\n\n    \n\n}","ï»¿// For an introduction to the Blank template, see the following documentation:\n// http://go.microsoft.com/fwlink/?LinkID=397705\n// To debug code on page load in Ripple or on Android devices/emulators: launch your app, set breakpoints, \n// and then run \"window.location.reload()\" in the JavaScript Console.\n\n/// <reference path=\"jquery.d.ts\"/>\n/// <reference path=\"leaflet.d.ts\"/>\n/// <reference path=\"map.ts\"/>\n//import Map = require('Map');\n\nmodule TypescriptMap {\n    \"use strict\";\n\n    export module Application {\n        export function initialize() {\n            document.addEventListener('deviceready', onDeviceReady, false);\n        }\n\n        function onDeviceReady() {\n            // Handle the Cordova pause and resume events\n            document.addEventListener('pause', onPause, false);\n            document.addEventListener('resume', onResume, false);\n\n            // TODO: Cordova has been loaded. Perform any initialization that requires Cordova here.\n            var parentElement = document.getElementById('deviceready');\n            var listeningElement = parentElement.querySelector('.listening');\n            var receivedElement = parentElement.querySelector('.received');\n            listeningElement.setAttribute('style', 'display:none;');\n            receivedElement.setAttribute('style', 'display:block;');\n\n\n            var map: Map.Map = new Map.Map(<HTMLFormElement>document.getElementById('form'));\n\n        }\n\n        function onPause() {\n            // TODO: This application has been suspended. Save application state here.\n        }\n\n        function onResume() {\n            // TODO: This application has been reactivated. Restore application state here.\n        }\n\n    }\n\n    window.onload = function () {\n        Application.initialize();\n    }\n}\n"]}